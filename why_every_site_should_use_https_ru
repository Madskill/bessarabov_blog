# Почему все сайты должны работать по https (и не работать по http)

date_time: 2014-02-06 14:49:25 MSK

Существует два популярных протокола по которым работают сайты: это http — самое
простое что только может быть и https — то же самое что http, но с
шифрованием.

При использовании https сайт получает два профита:

 * Трафик между пользователем и сайтом нельзя прочитать третьей стороне
 * Трафик между пользователем и сайтом нельзя изменить

(Вообще, еще бы очень хотелось чтобы была гарантия что ты общаешься имеенно с
тем сайтом с которым думаешь что общаешься, но в случае https это, кажется, не
то чтобы очень работает)

## Нельзя прочитать

Совершенно понятна выгода для сайта использовать https если на сайте находится
какая-то приватная информация пользователя.

Вот есть у меня, например, сайт на котором пользователи могут чатится друг с
другом. Если сайт работает по http, то пользователь сидящий в кафешке с
бесплатным WiFi подвержен угрозе что люди за соседним столико уже скачали всю
его переписку. Пользователю от этого станет плохо, он придет ко мне с вопросом
"почему ты не обеспечил защиту моих данных?" и будет прав.

А при использовании https все замечательно — между пользователем и моим сайтом
открывается защищенный канал в который никто не может влезть.

## Нельзя изменить

А вот если у меня сайт на которм нет никакой секретной пользовательской
информации. Например, у меня есть маленький новостной сайт. Все статьи
доступны всему интернету, зачем мне ставить на сайт https?

Протокол https в этом случае используется не для того чтобы засекретить
передачу данных от сайта до пользователя, а для того чтобы гарантировать что
пользователь получает именно то что сайт ему отправляет.

А что может поменятся в коде? Ну, во первых в код сайта могут вставить вирусы
и пользователь вместе с html страницей получит вирус. Но кроме этого есть и
другая зараза, которая может поменять сайт моего сайта. Покажу на примере.

## WiFi в московском метро

Мы живем в будущем. Роботы-пылесоы, машины без водителей, службы доставки уже
почти используют радиоуправляемые вертолеты и в московсом метро на некоторых
ветках у нас WiFi.

Открываю я в метро один из моих любимых блогов и вижу:

[![ad_small][ad_small]][ad_big]

WTF? Сроду такого на этом сайте не было. Пошел смотреть. Рекланая ссылка ведет
на [http://maxima.wiflyad.net/update.js?id=1...][ad_link]:

[![ad_open_small][ad_open_small]][ad_open_big]

Так. Оказыватеся, это компания WiFly [http://wiflyadnet.nethouse.ru][wifly],
которая специализируется на том что вставляет рекламу в WiFi трафик.

Кстати, тысяча показов (CPM) у них продается по [1000 рублей без НДС][cost]
(на сайте у них инфа только про питер, видимо еще не обновили сайт).

После этого я прочитал условия использования WiFi в метро и действительно, в
EULA четко прописано что они имеют право вставлять рекламу:

[![eula_small][eula_small]][eula_big]

То есть получается замечательный бизнес — вставлять на чужие сайты свою
рекламу и получать на этом деньги. (Кстати, интресно, насколько это законно).

Кстати с сайтом blogs.perl.org, на котором я впервые увидел рекламу еще все
хорошо получилось — аккуратная реклама внизу страницы. А вот хабр, например,
вообще не работет из-за этого кода — страница постоянно перезагружается.

Делаешь сайт, работаешь над ним, а кто-то минуя тебя зарабатывает на твоем
творении деньги. Жуть.

А вот если бы сайт работал по https, то проблемы бы не было — нельзя просто
взять и вставить рекламу в сайт, работающий по https.

## Резюме

Сайт которым я занимаюсь по работе уже давно работает только по https.

Но я и свою домашню страничку [ivan.bessarabov.ru](https://ivan.bessarabov.ru)
тоже перевел на работу только черзе https — потому что я хочу чтобы
польователи моего сайта видели все так как я сделал, а не так как решили
другие.

(Я купил SSL сертификат за $8 в год на сайте [ssls.com](http://www.ssls.com/),
я и не знал что они уже такие дешевые).

 [ad_big]: https://upload.bessarabov.ru/bessarabov/6HNdm6zj81q5Iw_FIZfwIXQsDCo.png
 [ad_small]: https://upload.bessarabov.ru/bessarabov//DmrNHT6rE1-X6Hqnt6f9T2URxfU.png
 [ad_link]: http://maxima.wiflyad.net/update.js?id=1&g=7d054ad47154b676ac717de08c752f8f&uid=98436d29607cd915a46085c42ee99a92&pl=2
 [ad_open_big]: https://upload.bessarabov.ru/bessarabov/ZlvOh63Q2xS7VI3vLTAID574zMk.png
 [ad_open_small]: https://upload.bessarabov.ru/bessarabov/cLSJqP4hFwyqFI8ptOuS5pSqeJo.png
 [wifly]: http://wiflyadnet.nethouse.ru
 [cost]: http://wiflyadnet.nethouse.ru/foradpathners
 [eula_big]: https://upload.bessarabov.ru/bessarabov/YK2kXQ_FDJXyv0YRW38DYhNV47s.png
 [eula_small]: https://upload.bessarabov.ru/bessarabov/Nk1nxdqfQxZmAI-qkII-vUcOXvw.png
