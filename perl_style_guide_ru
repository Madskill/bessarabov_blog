# Bessarabov's Perl Style Guide

date_time: 2013-08-08 08:40:09 MSK

Эпиграф — "Tim Toady Bicarbonate".

Perl можно использовать множеством разных способов, но удобно, когда есть
какие-то общие правила. В этом посте я собираю мои предпочтения о том как
нужно писать Perl код. Это в первую очередь документ для меня, но я буду очень
рад, если другие люди тоже станут использовать этот Style Guide без изменений,
либо возьмут этот докумен за базу и внесут необходимые правки (т.е. напишут,
что используется BPSG версии 2.0.0, но правило 34 затирают своим правилом).

Любое правило можно нарушить, но нужно веская причина почему правило стоит
игнорировать в этом конкретном случае.

Версия документа: 2.0.0 (используется [семантическое версионирование][SemVer])

 [SemVer]: http://semver.org/

Changelog:

    1.0.0   2013-08-08
            [Major]
            * Inital version

    2.0.0   2014-01-19
            [Major]
            * Simplified the numeration scheme

## 1. Кодировка файлов UTF-8

Это самая популярная кодировка, конечно стоит использовать именно ее.

Нужно найти/написать Perl тест, чтобы иметь возможность проверять что файл
написан в кодировке UTF-8.

## 2. В файлах не должен использоваться BOM

BOM — это [Byte order mark][bom], штука с помощью которого указывают кодировку
файла. Поскольку уже есть правило 1.1, которое говорит что кодировка всегда
UTF-8, то BOM использовать избытачно.

Нужно найти/написать Perl тест, который может проверять что BOM не
используется.

 [bom]: http://ru.wikipedia.org/wiki/Byte_order_mark

## 3. POD всегда начинается с `=encoding UTF-8`

Далеко не всегда в POD есть какие-то символы, которых нет в простой 8-и битной
кодировке [Latin1][latin1]. Когда такие символы есть, то конечно, обязательно
нужно узазывать `=encoding UTF-8`. Но даже когда весь POD написан простым
latin1, все равно стоит указывать кодирову UTF-8, чтобы изменение текста не
потребовало еще и дописывание директивы.

[Ссылка на stackoverflow][so], с ответом что из всех возможных кодировок "utf8",
"UTF-8", "utf-8" нужно писать именно "UTF-8".

И директива `=encoding UTF-8` всегда должна быть самой первой директирой POD.

 [latin1]: http://en.wikipedia.org/wiki/Latin1
 [so]: http://stackoverflow.com/questions/18109154/what-string-should-be-used-to-specify-encoding-in-perl-pod-utf8-utf-8-or/

## 4. Для имен переменных используется нижний регистри и символ "_"

Нужно писать `$some_variable`, а не `$SomeVariable` или как-то иначе.

Предпосылки этого — то что это самый читаемый стандарт и это очень
распространенная практика в мире Perl.

## 5. Переменная с именем файла называется $file_name

Достаточно часто в коде встречаются переменные которые хранят в себе имя
какого-то файла. Такую переменую называют по разному: иногда `$filename`, а
иногда `$file_name`. Какого-то очивидного плюса нет ни у одного варианта, но
чтобы был какой-то стандарт, я выбрал вариант `$file_name`, так как на мой
взгляд это красивее.

[Википедия][wiki_filename] тоже не вносит однозначного ответа как правильно,
цитирую:

> A filename (also written as two words, file name) ...

 [wiki_filename]: http://en.wikipedia.org/wiki/Filename
